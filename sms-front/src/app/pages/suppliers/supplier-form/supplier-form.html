<div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-lg font-semibold text-gray-800 mb-4">{{ isEditMode() ? 'Edit Supplier' : 'Create Supplier' }}</h2>

    <form [formGroup]="supplierForm" (ngSubmit)="onSubmit()" class="space-y-4">
        <!-- Two Column Layout -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Left Column -->
            <div class="space-y-3">
                <!-- Name -->
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Name *</label>
                    <input type="text" id="name" formControlName="name"
                        class="w-full px-2.5 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors"
                        placeholder="Enter supplier name" required
                        [class.input-error]="supplierForm.controls.name.invalid && supplierForm.controls.name.touched"
                        [class.input-success]="supplierForm.controls.name.valid && supplierForm.controls.name.touched">
                    @if (supplierForm.controls.name.invalid && supplierForm.controls.name.touched) {
                    <div role="alert" class="text-red-600 text-xs mt-1 flex items-center">
                        <i class="fas fa-exclamation-circle mr-1"></i>
                        <span>Name is required</span>
                    </div>
                    }
                </div>

                <!-- Phone -->
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone *</label>
                    <input type="tel" id="phone" formControlName="phone"
                        class="w-full px-2.5 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors"
                        placeholder="Enter phone number" required
                        [class.input-error]="supplierForm.controls.phone.invalid && supplierForm.controls.phone.touched"
                        [class.input-success]="supplierForm.controls.phone.valid && supplierForm.controls.phone.touched">
                    @if (supplierForm.controls.phone.invalid && supplierForm.controls.phone.touched) {
                    <div role="alert" class="text-red-600 text-xs mt-1 flex items-center">
                        <i class="fas fa-exclamation-circle mr-1"></i>
                        <span>Phone is required</span>
                    </div>
                    }
                </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-3">
                <!-- Email -->
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                    <input type="email" id="email" formControlName="email"
                        class="w-full px-2.5 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors"
                        placeholder="Enter email address" required
                        [class.input-error]="supplierForm.controls.email.invalid && supplierForm.controls.email.touched"
                        [class.input-success]="supplierForm.controls.email.valid && supplierForm.controls.email.touched">
                    @if (supplierForm.controls.email.invalid && supplierForm.controls.email.touched) {
                    <div role="alert" class="text-red-600 text-xs mt-1 flex items-center">
                        <i class="fas fa-exclamation-circle mr-1"></i>
                        <span>
                            {{ supplierForm.controls.email.errors?.['required'] ? 'Email is required' : 'Valid email is
                            required' }}
                        </span>
                    </div>
                    }
                </div>

                <!-- Logo Upload -->
                <div>
                    <label for="logo" class="block text-sm font-medium text-gray-700 mb-1">Logo</label>
                    <input type="file" id="logo" accept="image/*" (change)="onFileChange($event)"
                        class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                </div>
            </div>
        </div>

        <!-- Full Width Fields -->
        <div class="space-y-3">
            <!-- Address -->
            <div>
                <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                <textarea id="address" formControlName="address" rows="3"
                    class="w-full px-2.5 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors"
                    placeholder="Enter supplier address"
                    [class.input-success]="supplierForm.controls.address.valid && supplierForm.controls.address.touched"></textarea>
            </div>

            <!-- Current Logo Preview (Edit Mode) -->
            @if (isEditMode() && existingLogoUrl()) {
            <div>
                <span class="block text-sm font-medium text-gray-700 mb-1">Current Logo</span>
                <div class="mt-1">
                    <img [src]="existingLogoUrl()" alt="Current supplier logo" title="Current supplier logo"
                        class="h-24 w-auto rounded-md shadow-sm border border-gray-200">
                </div>
            </div>
            }
        </div>

        <!-- Form Actions -->
        <div class="flex justify-end space-x-2 pt-4 border-t">
            <a routerLink="/suppliers"
                class="px-3 py-1.5 border border-gray-300 rounded text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors">
                Cancel
            </a>
            <button type="submit" [disabled]="supplierForm.invalid || isSubmitting()"
                class="px-3 py-1.5 border border-transparent rounded text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors">
                @if (isSubmitting()) {
                <i class="fas fa-spinner fa-spin mr-1"></i>
                }
                {{ isEditMode() ? 'Update' : 'Create' }} Supplier
            </button>
        </div>
    </form>
</div>